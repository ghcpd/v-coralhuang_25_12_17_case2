<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Task Dashboard - Baseline Demo</title>
    <style>
      :root{
        --bg:#f5f7fb; --card:#ffffff; --muted:#6b7280; --border:#e6e9ef;
        --primary:#2563eb; --accent:#06b6d4; --success:#16a34a; --danger:#dc2626; --glass: rgba(15,23,42,0.02);
      }

      /* Base */
      *{box-sizing:border-box}
      html,body{height:100%}
      body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 0; background: var(--bg); color: #0f172a; }

      header { background: linear-gradient(90deg,#0f172a,#0b3a67); color: #fff; padding: 18px 20px; }
      header .brand { max-width:1100px;margin:0 auto; display:flex;align-items:center;gap:16px }
      header h1{font-size:18px;margin:0;font-weight:700}
      header .subtitle{color:rgba(255,255,255,0.9);opacity:0.9;font-size:13px}

      .container { padding: 20px; max-width: 1100px; margin: 0 auto; display:grid; grid-template-columns: 1fr 280px; gap:20px; }

      /* Card */
      .card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 16px; box-shadow: 0 1px 0 rgba(16,24,40,0.02); min-height: 360px; position:relative; overflow:hidden }
      .controls { display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-bottom:14px }

      input[type="text"], select { height: 40px; border: 1px solid var(--border); border-radius: 8px; padding: 0 12px; background: #fff; font-size: 14px; color:inherit }
      input[type="text"]{width:320px}
      .btn { height:40px; border-radius:8px; border:1px solid var(--border); background:#fff;padding:0 12px; cursor:pointer }
      .btn.primary{background:var(--primary);color:#fff;border-color:transparent}
      .btn.ghost{background:transparent}
      .btn:disabled{opacity:.6;cursor:not-allowed}

      .status-pill{padding:6px 10px;border-radius:999px;border:1px solid var(--border);font-size:13px;background:var(--glass)}

      /* Table */
      .table-wrap{width:100%;overflow:auto;border-radius:8px}
      table { width: 100%; border-collapse: separate; border-spacing:0; min-width:760px }
      thead th{ text-align:left; padding:12px 12px; font-size:13px; font-weight:700; color:#0f172a; background:linear-gradient(180deg,#fafafa,#fff); border-bottom:1px solid var(--border); position:relative; cursor:pointer }
      thead th .sort { margin-left:8px; font-size:11px; color:var(--muted) }
      tbody td{ padding:12px; border-bottom:1px solid #f1f5f9; font-size:14px }
      tbody tr{ transition: background .18s ease, transform .12s ease; }
      tbody tr:hover{ background:#fbfdff; transform:translateY(-1px); cursor:pointer }
      tbody tr.recent{ animation: flash 1.2s ease; }
      @keyframes flash{ 0%{background: #fff7ed} 100%{background:transparent} }

      .title{font-weight:600}
      .muted{color:var(--muted);font-size:13px}

      /* Actions */
      .actions button{ min-width:86px }
      .row-error{color:var(--danger);font-size:12px;margin-top:6px}

      /* Overlay (loading / error) */
      .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.9));display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px;backdrop-filter: blur(2px)}
      .spinner{width:28px;height:28px;border-radius:50%;border:3px solid rgba(0,0,0,0.06);border-top-color:var(--primary);animation:spin .8s linear infinite}
      @keyframes spin{to{transform:rotate(360deg)}}

      .empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;border:2px dashed var(--border);border-radius:8px;background:linear-gradient(180deg,#fff,#fbfdff);gap:12px}

      /* Sidebar */
      aside.usage{background:#fff;border:1px solid var(--border);border-radius:10px;padding:16px;height:fit-content}
      aside.usage h3{margin:0 0 8px 0;font-size:14px}
      aside.usage ul{padding-left:16px;margin:0;color:var(--muted);font-size:13px}

      /* Responsive */
      @media (max-width:980px){ .container{grid-template-columns:1fr} aside.usage{order:2} }

      /* small helpers */
      .chip{display:inline-block;padding:6px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;font-size:12px}
      .highlight{background:rgb(254,243,199);padding:2px 4px;border-radius:4px}
    </style>
  </head>
  <body>
    <header>
      <div style="max-width:1100px;margin:0 auto;">
        <div style="font-size:16px;font-weight:700;">Task Dashboard (Baseline Demo)</div>
        <div class="muted" style="color:#d1d5db;">List + Search + Filter + Sort + Pagination + Read-only Details</div>
      </div>
    </header>

    <div class="container">
      <main>
        <div class="card">
          <div class="controls">
            <input id="q" type="text" placeholder="Search by title..." aria-label="Search tasks" />

            <select id="status" aria-label="Status filter">
              <option value="ALL">All Status</option>
              <option value="TODO">TODO</option>
              <option value="IN_PROGRESS">IN_PROGRESS</option>
              <option value="DONE">DONE</option>
            </select>

            <div style="display:flex;gap:10px;align-items:center">
              <label class="muted" style="font-size:13px;display:flex;align-items:center;gap:8px"><input id="simulateError" type="checkbox" /> Simulate load error</label>
            </div>

            <button id="reset" class="btn ghost" type="button">Reset View</button>

            <div style="margin-left:auto;display:flex;align-items:center;gap:10px">
              <span class="status-pill" id="summary">0 items</span>
            </div>
          </div>

          <div class="table-wrap" aria-live="polite">
            <div id="overlay" class="overlay" style="display:none">
              <div class="spinner" aria-hidden="true"></div>
              <div id="overlayMsg" class="muted">Loading tasks…</div>
              <button id="overlayRetry" class="btn" style="display:none">Retry</button>
            </div>

            <div id="empty" class="empty-state" style="display:none">
              <div style="font-weight:700">No tasks match your filters</div>
              <div class="muted">Adjust search or filters to find tasks.</div>
              <div style="display:flex;gap:8px;margin-top:6px">
                <button id="resetFromEmpty" class="btn primary">Reset View</button>
              </div>
            </div>

            <table aria-label="Task table">
              <thead>
                <tr>
                  <th data-key="id">Task ID <span class="sort"></span></th>
                  <th data-key="title">Title <span class="sort"></span></th>
                  <th data-key="assignee">Assignee <span class="sort"></span></th>
                  <th data-key="status">Status <span class="sort"></span></th>
                  <th data-key="createdAt">Created At <span class="sort"></span></th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>

          <div class="pager" style="margin-top:12px">
            <span class="muted">Page size</span>
            <select id="pageSize" aria-label="Page size">
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="20">20</option>
            </select>

            <button id="prev" class="btn" type="button">Prev</button>
            <span id="pageInfo" class="muted"></span>
            <button id="next" class="btn" type="button">Next</button>
          </div>
        </div>
      </main>

      <aside class="usage">
        <h3>Usage Guide</h3>
        <ul>
          <li><strong>Search</strong>: Type keywords in the search box; matching words in titles are highlighted.</li>
          <li><strong>Filter</strong>: Use the status menu to restrict results.</li>
          <li><strong>Sort</strong>: Click column headers to sort (click again to toggle).</li>
          <li><strong>Pagination</strong>: Change page size and use Prev/Next to navigate pages.</li>
          <li><strong>Inline updates</strong>: Use the action button on a row to advance status (TODO → IN_PROGRESS → DONE). Actions show per-row loading and briefly highlight updated rows.</li>
        </ul>
      </aside>
    </div>

    <!-- Modal -->
    <div class="backdrop" id="backdrop">
      <div class="modal" role="dialog" aria-modal="true" aria-label="Task details dialog">
        <div class="modal-hd">
          <div style="font-weight:700;">Task Details</div>
          <button class="xbtn" id="close" aria-label="Close dialog" type="button">×</button>
        </div>
        <div class="modal-bd" id="modalBody"></div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Task Dashboard - Baseline Demo</title>
    <style>
      :root{
        --bg:#f4f6f8; --card:#ffffff; --muted:#6b7280; --border:#e6e9ee;
        --accent:#2563eb; --accent-600:#1d4ed8; --success:#10b981; --danger:#ef4444;
        --glass: rgba(15,23,42,0.04);
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin: 0; background: var(--bg); color:#0f172a; }

      header { background: linear-gradient(90deg,#0f172a,#0b1220); color: #fff; padding: 18px 16px; box-shadow: 0 2px 8px rgba(2,6,23,0.35); }
      header .wrap{max-width:1200px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between}
      header h1{font-size:18px;margin:0;font-weight:700;letter-spacing:0.2px}
      header p{margin:0;color:rgba(255,255,255,0.85);font-size:13px}

      .container{max-width:1200px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:1fr 280px;gap:18px}

      /* Main card */
      .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;box-shadow:0 1px 0 rgba(16,24,40,0.03)}
      .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px}
      .controls .left{display:flex;gap:10px;align-items:center}

      input[type='text'], select, button{height:38px;border:1px solid var(--border);border-radius:8px;padding:0 12px;background:#fff;font-size:13px;color:var(--muted)}
      input[type='text']{min-width:240px;box-shadow:inset 0 1px 0 rgba(2,6,23,0.03)}
      button{cursor:pointer;background:linear-gradient(180deg,#fff,#f8fafc);color:#0f172a;border-radius:8px}
      button.primary{background:linear-gradient(180deg,var(--accent),var(--accent-600));color:#fff;border:1px solid rgba(13,42,148,0.9);box-shadow:0 6px 18px rgba(37,99,235,0.18)}
      button.ghost{background:transparent;border:1px solid var(--border);color:var(--muted)}

      .pill{padding:6px 10px;border-radius:999px;border:1px solid var(--border);font-size:13px;background:var(--glass);color:var(--muted)}
      .muted{color:var(--muted);font-size:13px}

      table{width:100%;border-collapse:collapse;margin-top:6px;font-size:14px}
      thead th{background:transparent;padding:12px 10px;text-align:left;color:var(--muted);font-size:13px;border-bottom:1px solid var(--border);cursor:pointer;position:relative}
      thead th .sort{font-size:11px;color:var(--muted);margin-left:8px;opacity:0.9}
      tbody td{padding:12px 10px;border-bottom:1px solid var(--border);vertical-align:middle}

      tbody tr{transition:background .18s ease,transform .12s ease;cursor:pointer}
      tbody tr:hover{background:rgba(15,23,42,0.03);transform:translateY(-1px)}

      .status{display:inline-flex;gap:8px;align-items:center}
      .status .tag{font-weight:600;font-size:12px;padding:6px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;color:var(--muted)}
      .tag.todo{color:#0f172a;background:linear-gradient(180deg,#fff,#fbfdff);border-color:#e6eefc}
      .tag.inprog{color:#065f46;background:linear-gradient(180deg,#ecfdf5,#f8fffb);border-color:#d1fae5}
      .tag.done{color:#065f46;background:linear-gradient(180deg,#f8fdf7,#f0fff7);border-color:#bbf7d0}

      .row-action{display:inline-flex;gap:6px;align-items:center}
      .icon-btn{height:30px;width:30px;border-radius:8px;border:1px solid var(--border);display:inline-grid;place-items:center;background:#fff;color:var(--muted);cursor:pointer}
      .icon-btn[disabled]{opacity:0.6;cursor:not-allowed}

      /* small spinner */
      .spinner{width:16px;height:16px;border-radius:50%;border:2px solid rgba(0,0,0,0.08);border-top-color:var(--accent);animation:spin .9s linear infinite}
      @keyframes spin{to{transform:rotate(360deg)}}

      /* loading and error banner */
      .banner{display:flex;gap:10px;align-items:center;padding:10px;border-radius:8px;margin-bottom:12px}
      .banner.loading{background:linear-gradient(90deg,rgba(37,99,235,0.06),rgba(2,6,23,0.02));border:1px solid rgba(37,99,235,0.12);color:var(--accent)}
      .banner.error{background:linear-gradient(90deg,rgba(239,68,68,0.06),rgba(2,6,23,0.02));border:1px solid rgba(239,68,68,0.12);color:var(--danger)}

      .pager{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-top:12px}
      .pager select{height:34px}

      /* empty state */
      .empty{padding:36px;text-align:center;color:var(--muted)}
      .empty button{margin-top:12px}

      /* updated highlight */
      tr.updated td{box-shadow:inset 0 3px 0 rgba(16,185,129,0.10);animation:fadeOut 2.2s ease forwards}
      @keyframes fadeOut{0%{background:rgba(16,185,129,0.08)}80%{background:rgba(16,185,129,0.04)}100%{background:transparent}}

      /* inline error */
      .inline-error{color:var(--danger);font-size:13px;margin-top:8px}

      /* Modal tweaks */
      .modal{width:560px;border-radius:12px}
      .modal-hd{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
      .modal-bd{padding:16px}

      /* sidebar */
      aside.card{position:sticky;top:22px;height:fit-content}
      aside h3{margin:0 0 8px 0;font-size:14px}
      aside p{margin:6px 0;color:var(--muted);font-size:13px;line-height:1.4}
      aside .kbd{display:inline-block;padding:6px 8px;border-radius:6px;border:1px solid var(--border);background:#fff;font-size:13px;margin:6px 4px 0 0}

      /* responsive */
      @media (max-width:880px){
        .container{grid-template-columns:1fr;padding:0 12px}
        aside.card{order:2;margin-top:6px}
      }
    </style>
  </head>
  <body>
    <header>
      <div style="max-width:1100px;margin:0 auto;">
        <div style="font-size:16px;font-weight:700;">Task Dashboard (Baseline Demo)</div>
        <div class="muted" style="color:#d1d5db;">List + Search + Filter + Sort + Pagination + Read-only Details</div>
      </div>
    </header>

    <div class="container">
      <main class="card" aria-live="polite">
        <div id="loadingBanner" class="banner loading" style="display:none"><div class="spinner" aria-hidden="true"></div><div id="loadingText">Loading tasksâ€¦</div></div>
        <div id="errorBanner" class="banner error" style="display:none"><div style="font-weight:700">Load failed</div><div id="errorText" style="flex:1;color:inherit;opacity:0.95">Could not fetch tasks. <button id="retry" class="ghost" style="margin-left:8px">Retry</button></div></div>

        <div class="controls">
          <div class="left">
            <input id="q" type="text" placeholder="Search by title..." aria-label="Search" />

            <select id="status" aria-label="Status filter">
              <option value="ALL">All status</option>
              <option value="TODO">TODO</option>
              <option value="IN_PROGRESS">IN_PROGRESS</option>
              <option value="DONE">DONE</option>
            </select>

            <button id="reset" type="button" class="ghost" title="Reset view">Reset view</button>

            <span class="pill" id="summary">0 items</span>
          </div>

          <div style="display:flex;align-items:center;gap:10px">
            <span class="muted">Click headers to sort</span>
          </div>
        </div>

        <div id="tableWrap">
          <table aria-label="Task table">
            <thead>
              <tr>
                <th data-key="id">Task ID <span class="sort">#</span></th>
                <th data-key="title">Title <span class="sort">ðŸ”Ž</span></th>
                <th data-key="assignee">Assignee <span class="sort">ðŸ‘¤</span></th>
                <th data-key="status">Status <span class="sort">âš‘</span></th>
                <th data-key="createdAt">Created At <span class="sort">ðŸ•˜</span></th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>

          <div id="emptyState" class="card empty" style="display:none">
            <div style="font-weight:700;margin-bottom:6px">No tasks match your filters</div>
            <div class="muted">Try clearing search, changing filters, or reset the view.</div>
            <button id="emptyReset" class="primary">Reset view</button>
          </div>
        </div>

        <div class="pager">
          <span class="muted">Page size</span>
          <select id="pageSize" aria-label="Page size">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="20">20</option>
          </select>

          <button id="prev" type="button" class="ghost">Prev</button>
          <span id="pageInfo" class="muted"></span>
          <button id="next" type="button" class="ghost">Next</button>
        </div>
      </main>

      <aside class="card" aria-labelledby="guideH">
        <h3 id="guideH">Usage guide</h3>
        <p>Quick tips to use the Task Dashboard. The guide is persistent and adapts for small screens.</p>
        <p><strong>Search</strong> â€” Type keywords in the search box. Matches in titles are highlighted.</p>
        <p><strong>Filter</strong> â€” Use the <span class="kbd">Status</span> dropdown to narrow results.</p>
        <p><strong>Sort</strong> â€” Click any column header to sort (click again to reverse, click a third time to clear).</p>
        <p><strong>Pagination</strong> â€” Use the pager controls to navigate pages and change page size.</p>
        <p><strong>Inline updates</strong> â€” Click the small arrow button on a row to advance status (TODO â†’ IN_PROGRESS â†’ DONE). Row-level loading, success highlight and inline errors are shown.</p>
        <div style="margin-top:12px">
          <div class="muted" style="font-size:13px">Keyboard shortcuts</div>
          <div style="margin-top:8px">
            <span class="kbd">/</span>
            <span class="kbd">Esc</span>
          </div>
        </div>
      </aside>
    </div>

    <!-- Modal -->
    <div class="backdrop" id="backdrop">
      <div class="modal" role="dialog" aria-modal="true" aria-label="Task details dialog">
        <div class="modal-hd">
          <div style="font-weight:700;">Task Details</div>
          <button class="xbtn" id="close" aria-label="Close dialog" type="button">Ã—</button>
        </div>
        <div class="modal-bd" id="modalBody"></div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
